services:
  - type: web
    name: market-analytics-backend
    environment: docker
    region: oregon
    plan: free
    branch: main
    dockerfilePath: backend/Dockerfile
    envVars:
      - key: ConnectionStrings__DefaultConnection
      - key: KITE__APIKEY
      - key: KITE__APISECRET
      - key: AllowedOrigins

  - type: static
    name: market-analytics-frontend
    env: node
    region: oregon
    plan: free
    branch: main
    buildCommand: "cd frontend && npm install && npm run build"
    staticPublishPath: "frontend/dist"
    envVars:
      - key: VITE_API_BASE
